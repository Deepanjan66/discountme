{% extends 'base.html' %}
{% block content %}
<!-- The Modal -->
<div class="modal" id="myModal">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <!-- Modal Header -->
      <div class="modal-header">
        <h4 class="modal-title">Select friends</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>

      <!-- Modal body -->
      <div class="modal-body">

        <input type="text" id="search_friend" class="form-control" placeholder="Search friends..." required autofocus>
        <div class="friends-wrap">
            {% for friend in friends %}
            <div class="form-check">
              <input class="form-check-input" type="checkbox" value="" id="defaultCheck1">
              <label class="form-check-label" for="defaultCheck1">
                <span class="name">{{friend['name']}}</span>({{friend['id']}}) 
              </label>
            </div>
            {% endfor %}
        </div>

      </div>

      <!-- Modal footer -->
      <div class="modal-footer">
        <button type="button" class="btn btn-info" data-dismiss="modal">Finish</button>
      </div>

    </div>
  </div>
</div>

<div class="row">
    <div style="margin: 50px auto 0" class="col-lg-8">
        
    {# <!-- Custom styles for this template --> #}
    {# <link href="signin.css" rel="stylesheet"> #}

    <form method="post" enctype="multipart/form-data">
        <h1 style="text-align: center; line-height: 70px">Posting a new discount</h1>
        <div class="col-md-8" style="margin: 20px auto">
            <div class="form-group">
             <label>Product Name:</label>   
             <input type="text" name="name" class="form-control" placeholder="Enter product name" required autofocus>
            </div>
            <div class="form-group">
             <label>Original Price (Optional):</label>   
             <input type="number" name="original_price" class="form-control" placeholder="Enter original price" >
            </div>
            <div class="form-group">
             <label>Current Price:</label>   
             <input type="number" name="current_price" class="form-control" placeholder="Enter current price" required>
            </div>
            <div class="form-group">
             <label>Category:</label>   
             <input type="text" name="category" class="form-control" placeholder="Enter category" required list="categories">
             <datalist id="categories">
                 {% for category in all_category %}
                 <option value="{{category}}"></option>
                 {% endfor %}
             </datalist>
            </div>
            <div class="form-group">
              <label>Product Photo:</label> <br>
              <input type="file" name="file">
            </div>
            <div class="form-group">
              <label>Effective Period:</label>   
              <div class="form-row">
              <div class="col">
              <input type="number" name="expiration" class="form-control" placeholder="Expire in..." >
          </div>
          <div class="col">
          <select class="form-control" name="unit" id="unit">
              <option value="day">Day(s)</option>
              <option value="hour">Hour(s)</option>
          </select>
          </div>
          </div>
            </div>

            <div class="form-group">
              <label>Location:</label>   
              <input type="text" name="location" class="form-control" placeholder="Enter location" required>
            </div>
            <div class="form-group">
             <input class="form-check-inline" type="radio" name="sharing" id="sharing" value="true">
             <label class="form-check-label" for="sharing" style="margin-right: 10px">
               Available to everyone
             </label>
             <input class="form-check-inline" type="radio" name="sharing" id="sharing" value="false">
             <label class="form-check-label" for="sharing" style="margin-right: 10px">
                 Only available to my friends
             </label>
             <input class="form-check-inline" type="radio" name="sharing" id="sharing" value="false" data-toggle="modal" data-target="#myModal">
             <label class="form-check-label" for="sharing">
                 Only to selected frineds
             </label>
            </div>

          <button class="btn btn-lg btn-primary" type="submit">Submit</button>
        </div>
      <div class="checkbox mb-3">
      </div>
    </form>
</div>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/jquery-slim.min.js"></script>
<script src="/static/bootstrap.min.js"></script>
<script charset="utf-8">
    function filterFriends(e){
        name = e.target.value;
        const FRIENDS = $('.friends-wrap > .form-check');
        for(let i = 0; i < FRIENDS.length; i++){
            if(FRIENDS[i].getElementsByClassName('name')[0].innerHTML.toLowerCase().includes(name))
                FRIENDS[i].style.display = 'block';
             else
                FRIENDS[i].style.display = 'none';
        }
    } 
    {# filterFriends('Jul'); #}
    document.getElementById('search_friend').addEventListener('input', filterFriends);
</script>
{% endblock %}
